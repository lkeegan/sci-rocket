<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>sci-dash</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <!-- CSS files -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/css/tabler.min.css">
  </head>

  <body>
    <div class="page">
      <!-- Navbar -->
      <header class="navbar navbar-expand-md d-print-none">
        <div class="container-xl">
          <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href="./index.html">
              <img src="./static/logo.svg" width="110" height="32" alt="sci-rocket" class="navbar-brand-image" />
            </a>
            <div>
              <span style="color: #d63939">sci-rocket</span>
              <br />
              <span style="font-size: 10px"> <span style="color: #d63939">sci-rocket</span> / <span style="color: #206bc4">sci-dash</span>: <span id="version">N/A</span> </span>
            </div>
          </h1>
          <div class="navbar-nav flex-row order-md-last"></div>
        </div>
      </header>
      <div class="page-wrapper">
        <!-- Page header -->
        <div class="page-header d-print-none">
          <div class="container-xl">
            <div class="row g-2 align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">Overview</div>
                <h2 class="page-title">Dashboard:&nbsp<div id="experiment_name">N/A</div></h2>
              </div>
            </div>
          </div>
        </div>
        <!-- Page body -->
        <div class="page-body">
          <div class="container-xl">
            <div class="row row-deck row-cards">
              <!--Start - Sequencing overview-->
              <div class="col-sm-6 col-lg-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex align-items-center">
                      <div class="subheader">Total input read-pairs</div>
                      <div class="ms-auto lh-1"></div>
                    </div>
                    <div class="h1 mb-3" id="n_total_pairs">N/A</div>
                    <div class="d-flex mb-2">
                      <div class="subheader">
                        Correct R1 <br />
                        <sub>(p5+p7+ligation+RT)</sub>
                      </div>
                      <div class="ms-auto">
                        <span class="text-green d-inline-flex align-items-center lh-1">
                          <span id="n_total_pairs_success_perc">N/A</span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="icon icon-tabler icon-tabler-thumb-up"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            stroke-width="2"
                            stroke="currentColor"
                            fill="none"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3"></path>
                          </svg>
                        </span>
                        <span class="text-red d-inline-flex align-items-center lh-1">
                          <span id="n_total_pairs_failure_perc">N/A</span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="icon icon-tabler icon-tabler-thumb-down"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            stroke-width="2"
                            stroke="currentColor"
                            fill="none"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3"></path>
                          </svg>
                        </span>
                      </div>
                    </div>
                    <div class="progress progress-sm">
                      <div class="progress-bar bg-primary" style="width: 0%" role="progressbar" aria-valuemin="0" aria-valuemax="100" id="n_total_pairs_success_perc_bar"></div>
                    </div>
                    <br />
                    <div class="d-flex align-items-center">
                      <div class="subheader">No. of corrections (R1): <span style="color: #d63939" id="n_total_corrections">N/A</span></div>
                      <div class="ms-auto lh-1"></div>
                    </div>
                    <div style="height: 100px"><canvas id='chart-rescues'> </canvas></div>
                    <!--Start - Sample counter-->
                    <div class="d-flex align-items-center">
                      <div class="subheader">Total demultiplexed samples</div>
                      <div class="ms-auto lh-1"></div>
                    </div>
                    <div class="d-flex align-items-baseline">
                      <div class="h1 mb-3 me-2" id="n_totalsamples">N/A</div>
                      <div class="me-auto">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="icon icon-tabler text-green icon-tabler-users"
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          stroke-width="2"
                          stroke="currentColor"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                          <path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path>
                          <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                          <path d="M21 21v-2a4 4 0 0 0 -3 -3.85"></path>
                        </svg>
                      </div>
                    </div>
                    <!--End - Sample counter-->
                    <!--Start - Cell counter-->
                    <div class="d-flex align-items-center">
                      <div class="subheader">Total cells (Filtered)</div>
                      <div class="ms-auto lh-1"></div>
                    </div>
                    <div class="d-flex align-items-baseline">
                      <div class="h1 mb-3 me-2" id="n_total_cells">N/A</div>
                      <div class="me-auto">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="icon text-red icon-tabler icon-tabler-health-recognition"
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          stroke-width="2"
                          stroke="currentColor"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                          <path d="M4 8v-2a2 2 0 0 1 2 -2h2"></path>
                          <path d="M4 16v2a2 2 0 0 0 2 2h2"></path>
                          <path d="M16 4h2a2 2 0 0 1 2 2v2"></path>
                          <path d="M16 20h2a2 2 0 0 0 2 -2v-2"></path>
                          <path
                            d="M8.603 9.61a2.04 2.04 0 0 1 2.912 0l.485 .39l.5 -.396a2.035 2.035 0 0 1 2.897 .007a2.104 2.104 0 0 1 0 2.949l-3.397 3.44l-3.397 -3.44a2.104 2.104 0 0 1 0 -2.95z"
                          ></path>
                        </svg>
                      </div>
                    </div>
                    <!--End - Cell counter-->
                  </div>
                </div>
              </div>
              <!--End - Sequencing overview-->
              <!--Chart - Succesfull read-pairs per sample-->
              <div class="col-sm-6 col-lg-9">
                <div class="card">
                  <div class="card-body">
                    <div class="subheader">
                      Succesfull read-pairs per sample <br />
                      <sub>p5+p7+ligation+RT</sub>
                    </div>
                    <div class="chart-sm" style="min-height: 325px"><canvas id='chart-n_pairs_sample'> </canvas></div>
                  </div>
                </div>
              </div>
              <!--End Chart - Succesfull read-pairs per sample-->
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs">
                      <li class="nav-item">
                        <a href="#tabs-starsolo" class="nav-link active" data-bs-toggle="tab">Alignment (STARSolo)</a>
                      </li>
                      <li class="nav-item">
                        <a href="#tabs-pcr" class="nav-link" data-bs-toggle="tab">Counts - PCR Indexes</a>
                      </li>
                      <li class="nav-item">
                        <a href="#tabs-rt" class="nav-link" data-bs-toggle="tab">Counts - RT</a>
                      </li>
                      <li class="nav-item">
                        <a href="#tabs-hashing" class="nav-link" data-bs-toggle="tab">Hashing</a>
                      </li>
                      <li class="nav-item">
                        <a href="#tabs-uncorrectables" class="nav-link" data-bs-toggle="tab">Uncorrectable barcodes</a>
                      </li>
                      <li class="nav-item">
                        <a href="#tabs-data" class="nav-link" data-bs-toggle="tab">Sci-dash data (JSON)</a>
                      </li>
                    </ul>
                  </div>
                  <!--Tabs-->
                  <div class="card-body">
                    <div class="tab-content">
                      <!--Tab: Cells-->
                      <div class="tab-pane active show" id="tabs-starsolo">
                        <div class="container">
                          <div class="row">
                            <div class="card">
                              <div class="card-body">
                                <div id="table-default" class="table-responsive">
                                  <table class="table" id="sample-starsolo-table">
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--End Tab: Cells-->
                      <!--Tab: Alignment-->
                      <div class="tab-pane" id="tabs-alignment">
                        <div class="container">
                          <div class="row">
                            <div class="card">
                              <div class="card-body">
                                <div id="table-default" class="table-responsive">
                                  <table class="table card-table table-vcenter text-nowrap datatable" id="sample-alignment-table">
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--End Tab: Alignment-->
                      <!--Tab: PCR Indexes-->
                      <div class="tab-pane show" id="tabs-pcr">
                        <h4>Counts - PCR Indexes</h4>
                        <div class="container">
                          <div class="row">
                            <!--Chart: Well (p5) -->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - p5 index</div>
                                  <div class="chart-lg"><canvas id="chart-well-p5"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart: Well (p5) -->
                            <!--Chart: Well (p7) -->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - p7 index</div>
                                  <div class="chart-lg"><canvas id="chart-well-p7"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart: Well (p7) -->
                          </div>
                          <br />
                          <div class="row">
                            <!--Chart: Ligation usage -->
                            <div class="col-sm-12 col-lg-12">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Ligation</div>
                                  <div class="chart-lg"><canvas id="chart-ligation"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart: Well (p7) -->
                          </div>
                        </div>
                      </div>
                      <!--End - Tab: PCR Indexes-->
                      <!--Tab: RT plate usage-->
                      <div class="tab-pane" id="tabs-rt">
                        <h4>Counts - RT</h4>
                        <div class="container">
                          <div class="row">
                            <!--Chart - RT: Plate 01-->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - RT (Plate 1)</div>
                                  <div class="chart-lg" id="rt_plate_01"><canvas id="chart-rt_plate_01"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart - RT: Plate 01-->
                            <!--Chart - RT: Plate 02-->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - RT (Plate 2)</div>
                                  <div class="chart-lg" id="rt_plate_02"><canvas id="chart-rt_plate_02"></canvas></div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <br />
                          <!--End Chart - RT: Plate 02-->
                          <div class="row">
                            <!--Chart - RT: Plate 03-->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - RT (Plate 3)</div>
                                  <div class="chart-lg" id="rt_plate_03"><canvas id="chart-rt_plate_03"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart - RT: Plate 03-->
                            <!--Chart - RT: Plate 04-->
                            <div class="col-sm-6 col-lg-6">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Counts - RT (Plate 4)</div>
                                  <div class="chart-lg" id="rt_plate_04"><canvas id="chart-rt_plate_04"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End Chart - RT: Plate 04-->
                          </div>
                        </div>
                      </div>
                      <!--End - Tab: RT plate usage-->
                      <!--Tab: Hashing-->
                      <div class="tab-pane" id="tabs-hashing">
                        <div class="container">
                          <div class="row">
                            <div class="card">
                              <div class="card-body">
                                <div id="table-default" class="table-responsive">
                                  <table class="table" id="sample-hashing-table">
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--End Tab: Hashing-->
                      <!--Tab: Uncorrectable barcodes-->
                      <div class="tab-pane" id="tabs-uncorrectables">
                        <h4>Uncorrectable barcodes</h4>
                        <div class="container">
                          <!--Chart - Sankey: Uncorrectable barcode combinations-->
                          <div class="row">
                            <div class="col-sm-12 col-lg-12">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">Sankey: Combinations of uncorrectable barcodes</div>
                                  <div id="chart-sankey" class="chart-lg"></div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!--End Chart - Sankey: Uncorrectable barcode combinations-->
                          <br />
                          <!--Start uncorrectable row-->
                          <div class="row">
                            <!--Chart - Uncorrectable barcodes p5 (Top 15)-->
                            <div class="col-sm-6 col-lg-3">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">
                                    Uncorrectables: p5 index <br />
                                    <sub>(Top 15)</sub>
                                  </div>
                                  <div class="chart-lg" style="min-height: 400px"><canvas id="chart-top_uncorrectables_p5"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End - Uncorrectable barcodes (Top 15)-->
                            <!--Chart - Uncorrectable barcodes p7 (Top 15)-->
                            <div class="col-sm-6 col-lg-3">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">
                                    Uncorrectables: p7 index <br />
                                    <sub>(Top 15)</sub>
                                  </div>
                                  <div class="chart-lg" style="min-height: 400px"><canvas id="chart-top_uncorrectables_p7"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End - Uncorrectable barcodes (Top 15)-->
                            <!--Chart - Uncorrectable barcodes Ligation (Top 15)-->
                            <div class="col-sm-6 col-lg-3">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">
                                    Uncorrectables: Ligation <br />
                                    <sub>(Top 15)</sub>
                                  </div>
                                  <div class="chart-lg" style="min-height: 400px"><canvas id="chart-top_uncorrectables_lig"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End - Uncorrectable barcodes (Top 15)-->
                            <!--Chart - Uncorrectable barcodes RT (Top 15)-->
                            <div class="col-sm-6 col-lg-3">
                              <div class="card">
                                <div class="card-body">
                                  <div class="subheader">
                                    Uncorrectables: RT <br />
                                    <sub>(Top 15)</sub>
                                  </div>
                                  <div class="chart-lg" style="min-height: 400px"><canvas id="chart-top_uncorrectables_rt"></canvas></div>
                                </div>
                              </div>
                            </div>
                            <!--End - Uncorrectable barcodes (Top 15)-->
                          </div>
                          <!--End uncorrectable row-->
                        </div>
                      </div>
                      <!--End - Tab: Uncorrectable barcodes-->
                      <!--Tab: Data-->
                      <div class="tab-pane" id="tabs-data">
                        <div class="container">
                          <div class="row">
                            <div class="card">
                              <div class="card-body">
                                <pre id="json-data"></pre> 
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--End Tab: Alignment-->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!--Import tabler from CDN-->
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@latest/dist/js/tabler.min.js"></script>

    <!-- Import tablesorter from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"></script>
    
    <!-- Import chart.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.1"></script>

    <!-- Import anychart from CDN -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/flow.js"></script>


    <!--Import charts and data.-->
    <script src="./js/qc_data.js"></script>
    <script src="./js/sci_dash.js"></script>
  </body>
</html>
